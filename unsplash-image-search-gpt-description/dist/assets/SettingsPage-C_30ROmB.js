import{j as e}from"./query-vendor-BeCrZh-n.js";import{r as a}from"./react-vendor-BvX3KSce.js";import{c as s,k as t,l as r,A as l,m as d,C as i,X as n,E as c,n as o,o as x,K as m}from"./index-B3vA9Pia.js";import{S as g,T as h}from"./trash-2-DhQyHajh.js";import"./router-vendor-BUGIHN8D.js";import"./supabase-vendor-kNmrkgYZ.js";
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=s("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),u=s("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),p=s("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),b=s("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),j=({provider:a,value:s,onChange:t,onValidate:l,isValidating:m,validationResult:g,showValue:h,onToggleShow:y})=>{const u=d[a];return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:u.displayName}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:u.description})]}),e.jsxs("a",{href:u.getApiKeyUrl,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-3 py-1 text-sm bg-blue-50 text-blue-700 rounded-md hover:bg-blue-100 dark:bg-blue-900/20 dark:text-blue-300 dark:hover:bg-blue-900/30 transition-colors",children:["Get API Key",e.jsx(c,{className:"ml-1 h-3 w-3"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",value:s,onChange:e=>t(e.target.value),placeholder:u.placeholder,className:"w-full px-3 py-2 pr-20 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:border-gray-600 dark:text-gray-100 dark:placeholder-gray-400"}),e.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center",children:[e.jsx("button",{type:"button",onClick:y,className:"px-2 py-1 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",title:h?"Hide API key":"Show API key",children:h?e.jsx(o,{className:"h-4 w-4"}):e.jsx(x,{className:"h-4 w-4"})}),e.jsx("button",{type:"button",onClick:l,disabled:m||!s.trim(),className:"ml-1 mr-2 px-2 py-1 text-sm bg-gray-100 text-gray-700 rounded hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",title:"Test API key",children:m?e.jsx(r,{className:"h-4 w-4 animate-spin"}):"Test"})]})]}),g&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm "+(g.isValid?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[g.isValid?e.jsx(i,{className:"h-4 w-4"}):e.jsx(n,{className:"h-4 w-4"}),e.jsx("span",{children:g.isValid?"API key is valid":`Invalid: ${g.error}`})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:u.helpText})]})]})},f=()=>{const[s,c]=a.useState(null),[o,x]=a.useState({unsplash:"",openai:""}),[m,g]=a.useState({unsplash:!1,openai:!1}),[h,y]=a.useState({unsplash:!1,openai:!1}),[u,p]=a.useState({}),[b,f]=a.useState(!1),[k,N]=a.useState(!1),[v,w]=a.useState(!0);a.useEffect(()=>{C()},[]),a.useEffect(()=>{if(s){const e=Object.entries(o).some(([e,a])=>a!==(s.keys[e]||""));N(e)}},[o,s]);const C=async()=>{try{w(!0);const e=await t.getConfiguration();c(e);const a={...o};Object.entries(e.keys).forEach(([e,s])=>{a[e]=s||""}),x(a)}catch(e){console.error("Failed to load API configuration:",e)}finally{w(!1)}};return v?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(r,{className:"h-6 w-6 animate-spin text-blue-500"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-400",children:"Loading API settings..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(l,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:[e.jsx("p",{className:"font-medium mb-1",children:"Secure Storage"}),e.jsx("p",{children:"API keys are encrypted and stored locally in your browser. They are never sent to our servers. You can always clear them or reconfigure as needed."})]})]})}),e.jsx("div",{className:"space-y-8",children:Object.entries(d).map(([a,s])=>e.jsx(j,{provider:a,value:o[a],onChange:e=>((e,a)=>{x(s=>({...s,[e]:a})),p(a=>({...a,[e]:void 0}))})(a,e),onValidate:()=>(async e=>{const a=o[e].trim();if(a){y(a=>({...a,[e]:!0}));try{const s=await t.validateApiKey(e,a);p(a=>({...a,[e]:s}))}catch(s){p(a=>({...a,[e]:{isValid:!1,error:s instanceof Error?s.message:"Validation failed"}}))}finally{y(a=>({...a,[e]:!1}))}}})(a),isValidating:h[a],validationResult:u[a],showValue:m[a],onToggleShow:()=>(e=>{g(a=>({...a,[e]:!a[e]}))})(a)},a))}),k&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"You have unsaved changes"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:()=>{if(s){const e={...o};Object.entries(s.keys).forEach(([a,s])=>{e[a]=s||""}),x(e),p({}),N(!1)}},className:"px-4 py-2 text-sm text-gray-600 hover:text-gray-800 dark:text-gray-400 dark:hover:text-gray-200",children:"Cancel"}),e.jsx("button",{onClick:async()=>{f(!0);try{for(const[e,a]of Object.entries(o)){const s=a.trim()||null;await t.setApiKey(e,s)}await C(),N(!1),p({})}catch(e){console.error("Failed to save configuration:",e)}finally{f(!1)}},disabled:b,className:"px-4 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx(r,{className:"h-4 w-4 animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]}),s&&e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Current Status"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Object.entries(s.status).map(([a,s])=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:d[a].displayName}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm "+(s.isValid?"text-green-600 dark:text-green-400":s.isConfigured?"text-yellow-600 dark:text-yellow-400":"text-gray-500 dark:text-gray-400"),children:[s.isValid?e.jsx(i,{className:"h-4 w-4"}):s.isConfigured?e.jsx(l,{className:"h-4 w-4"}):e.jsx(n,{className:"h-4 w-4"}),e.jsx("span",{children:s.isValid?"Valid":s.isConfigured?"Not validated":"Not configured"})]})]}),s.lastValidated&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Last validated: ",s.lastValidated.toLocaleString()]}),s.error&&e.jsxs("p",{className:"text-xs text-red-600 dark:text-red-400 mt-1",children:["Error: ",s.error]})]},a))})]})]})},k=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"General Preferences"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Language"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choose your preferred language for the interface"})]}),e.jsxs("select",{className:"mt-1 block w-32 pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-300",children:[e.jsx("option",{children:"English"}),e.jsx("option",{children:"Spanish"}),e.jsx("option",{children:"French"}),e.jsx("option",{children:"German"})]})]})})]})}),N=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Appearance"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Theme"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choose your preferred theme"})]}),e.jsxs("select",{className:"mt-1 block w-32 pl-3 pr-10 py-2 text-base border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md dark:bg-gray-700 dark:text-gray-300",children:[e.jsx("option",{children:"Light"}),e.jsx("option",{children:"Dark"}),e.jsx("option",{children:"Auto"})]})]})})]})}),v=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Notifications"}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Learning Reminders"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Get notified to review your vocabulary"})]}),e.jsx("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 rounded dark:bg-gray-700",defaultChecked:!0})]})})]})}),w=()=>{const[s,r]=a.useState(!1);return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Data Management"}),e.jsx("div",{className:"space-y-4",children:e.jsx("div",{className:"border border-red-200 dark:border-red-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(y,{className:"h-5 w-5 text-red-600 dark:text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800 dark:text-red-200",children:"Clear API Configuration"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 mt-1",children:"This will remove all stored API keys and configuration data from your browser."}),e.jsxs("button",{onClick:async()=>{if(confirm("Are you sure you want to clear all API configuration data? This action cannot be undone.")){r(!0);try{await t.clearConfiguration(),alert("API configuration cleared successfully.")}catch(e){alert("Failed to clear API configuration.")}finally{r(!1)}}},disabled:s,className:"mt-3 inline-flex items-center px-3 py-2 text-sm bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(h,{className:"h-4 w-4 mr-2"}),s?"Clearing...":"Clear All Data"]})]})]})})})]})})},C=()=>{const[s,r]=a.useState("api"),[l,d]=a.useState(!1);a.useEffect(()=>{i()},[]);const i=async()=>{try{const e=await t.isSetupNeeded();d(e)}catch(e){console.error("Failed to check setup status:",e)}},n=[{id:"api",label:"API Keys",icon:m,component:f},{id:"general",label:"General",icon:g,component:k},{id:"appearance",label:"Appearance",icon:p,component:N},{id:"notifications",label:"Notifications",icon:u,component:v},{id:"data",label:"Data",icon:b,component:w}],c=n.find(e=>e.id===s)?.component||f;return e.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Settings"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Manage your VocabLens preferences and configuration"})]}),l&&e.jsx("div",{className:"mb-6 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200",children:"Setup Required"}),e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 mt-1",children:'You need to configure your API keys to use VocabLens. Click on "API Keys" to get started.'})]})]})}),e.jsxs("div",{className:"lg:grid lg:grid-cols-12 lg:gap-x-8",children:[e.jsx("aside",{className:"py-6 px-2 sm:px-6 lg:py-0 lg:px-0 lg:col-span-3",children:e.jsx("nav",{className:"space-y-1",children:n.map(a=>{const t=a.icon,d=s===a.id;return e.jsxs("button",{onClick:()=>r(a.id),className:"group rounded-md px-3 py-2 flex items-center text-sm font-medium w-full text-left transition-colors "+(d?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-900 dark:text-gray-300 hover:text-gray-900 dark:hover:text-gray-100 hover:bg-gray-50 dark:hover:bg-gray-800"),"aria-current":d?"page":void 0,children:[e.jsx(t,{className:"flex-shrink-0 -ml-1 mr-3 h-5 w-5 "+(d?"text-blue-600 dark:text-blue-400":"text-gray-400 dark:text-gray-500 group-hover:text-gray-500 dark:group-hover:text-gray-400"),"aria-hidden":"true"}),e.jsx("span",{className:"truncate",children:a.label}),"api"===a.id&&l&&e.jsx("span",{className:"ml-auto flex-shrink-0",children:e.jsx("div",{className:"h-2 w-2 bg-red-400 rounded-full"})})]},a.id)})})}),e.jsx("main",{className:"space-y-6 sm:px-6 lg:px-0 lg:col-span-9",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 shadow rounded-lg",children:e.jsx("div",{className:"px-4 py-6 sm:p-6",children:e.jsx(c,{})})})})]})]})};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */export{C as SettingsPage,C as default};
