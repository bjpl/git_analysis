import{j as e}from"./query-vendor-BeCrZh-n.js";import{r as t,b as r}from"./react-vendor-BvX3KSce.js";import{c as a,F as s,B as n,a as i,z as l,L as o,b as d,d as c,e as u,f as h}from"./index-B3vA9Pia.js";import{u as m,E as g,F as x,a as p,b as f,c as b,C as y,d as v}from"./Card-DdZQEDye.js";import{F as w,a as j,b as k}from"./SparklesIcon-D3uMr7p2.js";import{S as N}from"./search-DZ3Tuh-E.js";import"./router-vendor-BUGIHN8D.js";import"./supabase-vendor-kNmrkgYZ.js";function S({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3"}))}const C=t.forwardRef(S);function I({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const R=t.forwardRef(I);function _({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.666 3.888A2.25 2.25 0 0 0 13.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 0 1-.75.75H9a.75.75 0 0 1-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 0 1-2.25 2.25H6.75A2.25 2.25 0 0 1 4.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 0 1 1.927-.184"}))}const E=t.forwardRef(_);function L({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const M=t.forwardRef(L);function T({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const A=t.forwardRef(T);function D({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const O=t.forwardRef(D);function P({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const z=t.forwardRef(P);function W({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const H=t.forwardRef(W);function $({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const F=t.forwardRef($);function B({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const U=t.forwardRef(B);function G({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const V=t.forwardRef(G);function q({title:e,titleId:r,...a},s){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},a),e?t.createElement("title",{id:r},e):null,t.createElement("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"}))}const Z=t.forwardRef(q),Q=a("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),Y=(e,r)=>{const[a,s]=t.useState(e);return t.useEffect(()=>{const t=setTimeout(()=>{s(e)},r);return()=>{clearTimeout(t)}},[e,r]),a},K=({onSearch:r,isLoading:a,suggestions:l=[],placeholder:o="Search for images..."})=>{const[d,c]=t.useState(""),[u,h]=t.useState(!1),[m,g]=t.useState(-1),x=t.useRef(null),p=t.useRef(null),f=Y(d,300);t.useEffect(()=>{f.trim()&&r(f.trim())},[f,r]);const b=e=>{c(e),r(e),h(!1),g(-1),x.current?.blur()};return e.jsxs("div",{className:"relative w-full max-w-2xl mx-auto",children:[e.jsxs("form",{onSubmit:e=>{e.preventDefault(),d.trim()&&(r(d.trim()),h(!1),x.current?.blur())},className:"relative",children:[e.jsxs("div",{className:"relative flex items-center",children:[e.jsx(s,{className:"absolute left-3 h-5 w-5 text-gray-400 dark:text-gray-500 pointer-events-none"}),e.jsx("input",{ref:x,type:"text",value:d,onChange:e=>{const t=e.target.value;c(t),h(t.length>0&&l.length>0),g(-1)},onKeyDown:e=>{if(u&&0!==l.length)switch(e.key){case"ArrowDown":e.preventDefault(),g(e=>e<l.length-1?e+1:0);break;case"ArrowUp":e.preventDefault(),g(e=>e>0?e-1:l.length-1);break;case"Enter":m>=0&&(e.preventDefault(),b(l[m]));break;case"Escape":h(!1),g(-1),x.current?.blur()}},onFocus:()=>{d.length>0&&l.length>0&&h(!0)},onBlur:()=>{setTimeout(()=>{h(!1),g(-1)},150)},placeholder:o,className:"w-full pl-10 pr-20 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg \r\n                     bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100\r\n                     placeholder-gray-500 dark:placeholder-gray-400\r\n                     focus:ring-2 focus:ring-indigo-500 dark:focus:ring-indigo-400 focus:border-transparent\r\n                     transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:a,autoComplete:"off",spellCheck:"false","aria-label":"Search for images","aria-expanded":u,"aria-haspopup":"listbox",role:"combobox","aria-autocomplete":"list"}),e.jsxs("div",{className:"absolute right-2 flex items-center space-x-1",children:[d&&e.jsx(n,{type:"button",variant:"ghost",size:"sm",onClick:()=>{c(""),h(!1),x.current?.focus()},className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md","aria-label":"Clear search",children:e.jsx(i,{className:"h-4 w-4"})}),e.jsx(n,{type:"submit",variant:"primary",size:"sm",disabled:a||!d.trim(),className:"px-3 py-1.5",children:a?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}):"Search"})]})]}),u&&l.length>0&&e.jsx("div",{ref:p,className:"absolute z-50 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 \r\n                     rounded-lg shadow-lg max-h-60 overflow-y-auto",role:"listbox","aria-label":"Search suggestions",children:l.map((t,r)=>e.jsxs("button",{type:"button",onClick:()=>b(t),className:`w-full text-left px-4 py-2 text-sm transition-colors\n                  ${r===m?"bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400":"text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700"}\n                  ${0===r?"rounded-t-lg":""}\n                  ${r===l.length-1?"rounded-b-lg":""}\n                `,role:"option","aria-selected":r===m,children:[e.jsx(s,{className:"inline h-4 w-4 mr-2 text-gray-400 dark:text-gray-500"}),t]},`${t}-${r}`))})]}),!d&&!a&&e.jsxs("div",{className:"mt-4 text-center",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:"Try searching for: nature, architecture, people, food, or abstract"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2",children:["Nature","Architecture","People","Food","Abstract"].map(t=>e.jsx("button",{onClick:()=>{c(t.toLowerCase()),r(t.toLowerCase())},className:"px-3 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 \r\n                         rounded-full hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:t},t))})]})]})};
/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},J.apply(null,arguments)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}var te=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function re(e,t){return e===t||!(!te(e)||!te(t))}function ae(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!re(e[r],t[r]))return!1;return!0}function se(e,t){var r;void 0===t&&(t=ae);var a,s=[],n=!1;return function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];return n&&r===this&&t(i,s)||(a=e.apply(this,i),n=!0,r=this,s=i),a}}var ne="object"==typeof performance&&"function"==typeof performance.now?function(){return performance.now()}:function(){return Date.now()};function ie(e){cancelAnimationFrame(e.id)}var le=-1;var oe=null;function de(e){if(void 0===e&&(e=!1),null===oe||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var a=document.createElement("div"),s=a.style;return s.width="100px",s.height="100px",t.appendChild(a),document.body.appendChild(t),t.scrollLeft>0?oe="positive-descending":(t.scrollLeft=1,oe=0===t.scrollLeft?"negative":"positive-ascending"),document.body.removeChild(t),oe}return oe}var ce=function(e){var t=e.columnIndex;return e.data,e.rowIndex+":"+t};function ue(e){var r,a=e.getColumnOffset,s=e.getColumnStartIndexForOffset,n=e.getColumnStopIndexForStartIndex,i=e.getColumnWidth,l=e.getEstimatedTotalHeight,o=e.getEstimatedTotalWidth,d=e.getOffsetForColumnAndAlignment,c=e.getOffsetForRowAndAlignment,u=e.getRowHeight,h=e.getRowOffset,m=e.getRowStartIndexForOffset,g=e.getRowStopIndexForStartIndex,x=e.initInstanceProps,p=e.shouldResetStyleCacheOnItemSizeChange,f=e.validateProps;return(r=function(e){var r,b;function y(t){var r;return(r=e.call(this,t)||this)._instanceProps=x(r.props,X(r)),r._resetIsScrollingTimeoutId=null,r._outerRef=void 0,r.state={instance:X(r),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:"number"==typeof r.props.initialScrollLeft?r.props.initialScrollLeft:0,scrollTop:"number"==typeof r.props.initialScrollTop?r.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},r._callOnItemsRendered=void 0,r._callOnItemsRendered=se(function(e,t,a,s,n,i,l,o){return r.props.onItemsRendered({overscanColumnStartIndex:e,overscanColumnStopIndex:t,overscanRowStartIndex:a,overscanRowStopIndex:s,visibleColumnStartIndex:n,visibleColumnStopIndex:i,visibleRowStartIndex:l,visibleRowStopIndex:o})}),r._callOnScroll=void 0,r._callOnScroll=se(function(e,t,a,s,n){return r.props.onScroll({horizontalScrollDirection:a,scrollLeft:e,scrollTop:t,verticalScrollDirection:s,scrollUpdateWasRequested:n})}),r._getItemStyle=void 0,r._getItemStyle=function(e,t){var s,n=r.props,l=n.columnWidth,o=n.direction,d=n.rowHeight,c=r._getItemStyleCache(p&&l,p&&o,p&&d),m=e+":"+t;if(c.hasOwnProperty(m))s=c[m];else{var g=a(r.props,t,r._instanceProps),x="rtl"===o;c[m]=s={position:"absolute",left:x?void 0:g,right:x?g:void 0,top:h(r.props,e,r._instanceProps),height:u(r.props,e,r._instanceProps),width:i(r.props,t,r._instanceProps)}}return s},r._getItemStyleCache=void 0,r._getItemStyleCache=se(function(e,t,r){return{}}),r._onScroll=function(e){var t=e.currentTarget,a=t.clientHeight,s=t.clientWidth,n=t.scrollLeft,i=t.scrollTop,l=t.scrollHeight,o=t.scrollWidth;r.setState(function(e){if(e.scrollLeft===n&&e.scrollTop===i)return null;var t=r.props.direction,d=n;if("rtl"===t)switch(de()){case"negative":d=-n;break;case"positive-descending":d=o-s-n}d=Math.max(0,Math.min(d,o-s));var c=Math.max(0,Math.min(i,l-a));return{isScrolling:!0,horizontalScrollDirection:e.scrollLeft<n?"forward":"backward",scrollLeft:d,scrollTop:c,verticalScrollDirection:e.scrollTop<i?"forward":"backward",scrollUpdateWasRequested:!1}},r._resetIsScrollingDebounced)},r._outerRefSetter=function(e){var t=r.props.outerRef;r._outerRef=e,"function"==typeof t?t(e):null!=t&&"object"==typeof t&&t.hasOwnProperty("current")&&(t.current=e)},r._resetIsScrollingDebounced=function(){var e,t,a,s;null!==r._resetIsScrollingTimeoutId&&ie(r._resetIsScrollingTimeoutId),r._resetIsScrollingTimeoutId=(e=r._resetIsScrolling,t=150,a=ne(),s={id:requestAnimationFrame(function r(){ne()-a>=t?e.call(null):s.id=requestAnimationFrame(r)})})},r._resetIsScrolling=function(){r._resetIsScrollingTimeoutId=null,r.setState({isScrolling:!1},function(){r._getItemStyleCache(-1)})},r}b=e,(r=y).prototype=Object.create(b.prototype),r.prototype.constructor=r,ee(r,b),y.getDerivedStateFromProps=function(e,t){return he(e,t),f(e),null};var v=y.prototype;return v.scrollTo=function(e){var t=e.scrollLeft,r=e.scrollTop;void 0!==t&&(t=Math.max(0,t)),void 0!==r&&(r=Math.max(0,r)),this.setState(function(e){return void 0===t&&(t=e.scrollLeft),void 0===r&&(r=e.scrollTop),e.scrollLeft===t&&e.scrollTop===r?null:{horizontalScrollDirection:e.scrollLeft<t?"forward":"backward",scrollLeft:t,scrollTop:r,scrollUpdateWasRequested:!0,verticalScrollDirection:e.scrollTop<r?"forward":"backward"}},this._resetIsScrollingDebounced)},v.scrollToItem=function(e){var t=e.align,r=void 0===t?"auto":t,a=e.columnIndex,s=e.rowIndex,n=this.props,i=n.columnCount,u=n.height,h=n.rowCount,m=n.width,g=this.state,x=g.scrollLeft,p=g.scrollTop,f=function(e){if(void 0===e&&(e=!1),-1===le||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),le=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return le}();void 0!==a&&(a=Math.max(0,Math.min(a,i-1))),void 0!==s&&(s=Math.max(0,Math.min(s,h-1)));var b=l(this.props,this._instanceProps),y=o(this.props,this._instanceProps)>m?f:0,v=b>u?f:0;this.scrollTo({scrollLeft:void 0!==a?d(this.props,a,r,x,this._instanceProps,v):x,scrollTop:void 0!==s?c(this.props,s,r,p,this._instanceProps,y):p})},v.componentDidMount=function(){var e=this.props,t=e.initialScrollLeft,r=e.initialScrollTop;if(null!=this._outerRef){var a=this._outerRef;"number"==typeof t&&(a.scrollLeft=t),"number"==typeof r&&(a.scrollTop=r)}this._callPropsCallbacks()},v.componentDidUpdate=function(){var e=this.props.direction,t=this.state,r=t.scrollLeft,a=t.scrollTop;if(t.scrollUpdateWasRequested&&null!=this._outerRef){var s=this._outerRef;if("rtl"===e)switch(de()){case"negative":s.scrollLeft=-r;break;case"positive-ascending":s.scrollLeft=r;break;default:var n=s.clientWidth,i=s.scrollWidth;s.scrollLeft=i-n-r}else s.scrollLeft=Math.max(0,r);s.scrollTop=Math.max(0,a)}this._callPropsCallbacks()},v.componentWillUnmount=function(){null!==this._resetIsScrollingTimeoutId&&ie(this._resetIsScrollingTimeoutId)},v.render=function(){var e=this.props,r=e.children,a=e.className,s=e.columnCount,n=e.direction,i=e.height,d=e.innerRef,c=e.innerElementType,u=e.innerTagName,h=e.itemData,m=e.itemKey,g=void 0===m?ce:m,x=e.outerElementType,p=e.outerTagName,f=e.rowCount,b=e.style,y=e.useIsScrolling,v=e.width,w=this.state.isScrolling,j=this._getHorizontalRangeToRender(),k=j[0],N=j[1],S=this._getVerticalRangeToRender(),C=S[0],I=S[1],R=[];if(s>0&&f)for(var _=C;_<=I;_++)for(var E=k;E<=N;E++)R.push(t.createElement(r,{columnIndex:E,data:h,isScrolling:y?w:void 0,key:g({columnIndex:E,data:h,rowIndex:_}),rowIndex:_,style:this._getItemStyle(_,E)}));var L=l(this.props,this._instanceProps),M=o(this.props,this._instanceProps);return t.createElement(x||p||"div",{className:a,onScroll:this._onScroll,ref:this._outerRefSetter,style:J({position:"relative",height:i,width:v,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:n},b)},t.createElement(c||u||"div",{children:R,ref:d,style:{height:L,pointerEvents:w?"none":void 0,width:M}}))},v._callPropsCallbacks=function(){var e=this.props,t=e.columnCount,r=e.onItemsRendered,a=e.onScroll,s=e.rowCount;if("function"==typeof r&&t>0&&s>0){var n=this._getHorizontalRangeToRender(),i=n[0],l=n[1],o=n[2],d=n[3],c=this._getVerticalRangeToRender(),u=c[0],h=c[1],m=c[2],g=c[3];this._callOnItemsRendered(i,l,u,h,o,d,m,g)}if("function"==typeof a){var x=this.state,p=x.horizontalScrollDirection,f=x.scrollLeft,b=x.scrollTop,y=x.scrollUpdateWasRequested,v=x.verticalScrollDirection;this._callOnScroll(f,b,p,v,y)}},v._getHorizontalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanColumnCount,a=e.overscanColumnsCount,i=e.overscanCount,l=e.rowCount,o=this.state,d=o.horizontalScrollDirection,c=o.isScrolling,u=o.scrollLeft,h=r||a||i||1;if(0===t||0===l)return[0,0,0,0];var m=s(this.props,u,this._instanceProps),g=n(this.props,m,u,this._instanceProps),x=c&&"backward"!==d?1:Math.max(1,h),p=c&&"forward"!==d?1:Math.max(1,h);return[Math.max(0,m-x),Math.max(0,Math.min(t-1,g+p)),m,g]},v._getVerticalRangeToRender=function(){var e=this.props,t=e.columnCount,r=e.overscanCount,a=e.overscanRowCount,s=e.overscanRowsCount,n=e.rowCount,i=this.state,l=i.isScrolling,o=i.verticalScrollDirection,d=i.scrollTop,c=a||s||r||1;if(0===t||0===n)return[0,0,0,0];var u=m(this.props,d,this._instanceProps),h=g(this.props,u,d,this._instanceProps),x=l&&"backward"!==o?1:Math.max(1,c),p=l&&"forward"!==o?1:Math.max(1,c);return[Math.max(0,u-x),Math.max(0,Math.min(n-1,h+p)),u,h]},y}(t.PureComponent)).defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},r}var he=function(e,t){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,t.instance},me=ue({getColumnOffset:function(e,t){return t*e.columnWidth},getColumnWidth:function(e,t){return e.columnWidth},getRowOffset:function(e,t){return t*e.rowHeight},getRowHeight:function(e,t){return e.rowHeight},getEstimatedTotalHeight:function(e){var t=e.rowCount;return e.rowHeight*t},getEstimatedTotalWidth:function(e){var t=e.columnCount;return e.columnWidth*t},getOffsetForColumnAndAlignment:function(e,t,r,a,s,n){var i=e.columnCount,l=e.columnWidth,o=e.width,d=Math.max(0,i*l-o),c=Math.min(d,t*l),u=Math.max(0,t*l-o+n+l);switch("smart"===r&&(r=a>=u-o&&a<=c+o?"auto":"center"),r){case"start":return c;case"end":return u;case"center":var h=Math.round(u+(c-u)/2);return h<Math.ceil(o/2)?0:h>d+Math.floor(o/2)?d:h;default:return a>=u&&a<=c?a:u>c||a<u?u:c}},getOffsetForRowAndAlignment:function(e,t,r,a,s,n){var i=e.rowHeight,l=e.height,o=e.rowCount,d=Math.max(0,o*i-l),c=Math.min(d,t*i),u=Math.max(0,t*i-l+n+i);switch("smart"===r&&(r=a>=u-l&&a<=c+l?"auto":"center"),r){case"start":return c;case"end":return u;case"center":var h=Math.round(u+(c-u)/2);return h<Math.ceil(l/2)?0:h>d+Math.floor(l/2)?d:h;default:return a>=u&&a<=c?a:u>c||a<u?u:c}},getColumnStartIndexForOffset:function(e,t){var r=e.columnWidth,a=e.columnCount;return Math.max(0,Math.min(a-1,Math.floor(t/r)))},getColumnStopIndexForStartIndex:function(e,t,r){var a=e.columnWidth,s=e.columnCount,n=e.width,i=t*a,l=Math.ceil((n+r-i)/a);return Math.max(0,Math.min(s-1,t+l-1))},getRowStartIndexForOffset:function(e,t){var r=e.rowHeight,a=e.rowCount;return Math.max(0,Math.min(a-1,Math.floor(t/r)))},getRowStopIndexForStartIndex:function(e,t,r){var a=e.rowHeight,s=e.rowCount,n=e.height,i=t*a,l=Math.ceil((n+r-i)/a);return Math.max(0,Math.min(s-1,t+l-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.columnWidth,e.rowHeight}});var ge=function(){function e(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,r,a){return r&&e(t.prototype,r),a&&e(t,a),t}}(),xe=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},pe=function(){function e(){var t,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,n=Array(s),i=0;i<s;i++)n[i]=arguments[i];return r=a=xe(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(n))),a._lastRenderedStartIndex=-1,a._lastRenderedStopIndex=-1,a._memoizedUnloadedRanges=[],a._onItemsRendered=function(e){var t=e.visibleStartIndex,r=e.visibleStopIndex;a._lastRenderedStartIndex=t,a._lastRenderedStopIndex=r,a._ensureRowsLoaded(t,r)},a._setRef=function(e){a._listRef=e},xe(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(e,t.PureComponent),ge(e,[{key:"resetloadMoreItemsCache",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._memoizedUnloadedRanges=[],e&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return(0,this.props.children)({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(e,t){var r=this.props,a=r.isItemLoaded,s=r.itemCount,n=r.minimumBatchSize,i=void 0===n?10:n,l=r.threshold,o=void 0===l?15:l,d=function(e){for(var t=e.isItemLoaded,r=e.itemCount,a=e.minimumBatchSize,s=e.startIndex,n=e.stopIndex,i=[],l=null,o=null,d=s;d<=n;d++)t(d)?null!==o&&(i.push(l,o),l=o=null):(o=d,null===l&&(l=d));if(null!==o){for(var c=Math.min(Math.max(o,l+a-1),r-1),u=o+1;u<=c&&!t(u);u++)o=u;i.push(l,o)}if(i.length)for(;i[1]-i[0]+1<a&&i[0]>0;){var h=i[0]-1;if(t(h))break;i[0]=h}return i}({isItemLoaded:a,itemCount:s,minimumBatchSize:i,startIndex:Math.max(0,e-o),stopIndex:Math.min(s-1,t+o)});(this._memoizedUnloadedRanges.length!==d.length||this._memoizedUnloadedRanges.some(function(e,t){return d[t]!==e}))&&(this._memoizedUnloadedRanges=d,this._loadUnloadedRanges(d))}},{key:"_loadUnloadedRanges",value:function(e){for(var t=this,r=this.props.loadMoreItems||this.props.loadMoreRows,a=function(a){var s=e[a],n=e[a+1],i=r(s,n);null!=i&&i.then(function(){if(function(e){var t=e.lastRenderedStartIndex,r=e.lastRenderedStopIndex,a=e.startIndex,s=e.stopIndex;return!(a>r||s<t)}({lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:s,stopIndex:n})){if(null==t._listRef)return;"function"==typeof t._listRef.resetAfterIndex?t._listRef.resetAfterIndex(s,!0):("function"==typeof t._listRef._getItemStyleCache&&t._listRef._getItemStyleCache(-1),t._listRef.forceUpdate())}})},s=0;s<e.length;s+=2)a(s)}}]),e}();const fe=t.memo(({image:r,onSelect:a,onGenerateDescription:s,isSelected:i=!1,showActions:o=!0})=>{const[d,c]=t.useState(!1),[u,h]=t.useState(!1),[g,x]=t.useState(!1),[p,f]=t.useState(!1),b=m(),y=r.user?.name||r.user?.username||"Unknown",v=r.alt_description||r.description||`Photo by ${y}`;return e.jsxs("div",{className:`group relative bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden \n                  transition-all duration-200 hover:shadow-xl hover:scale-[1.02] cursor-pointer\n                  ${i?"ring-2 ring-indigo-500 shadow-lg":""}\n                  ${d||u?"":"animate-pulse"}`,onClick:()=>a(r),role:"button",tabIndex:0,"aria-label":`View image: ${v}`,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a(r))},children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-200 dark:bg-gray-700",children:[u?e.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 dark:bg-gray-700",children:e.jsxs("div",{className:"text-center text-gray-400 dark:text-gray-500",children:[e.jsx(V,{className:"w-12 h-12 mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Image unavailable"})]})}):e.jsx("img",{src:r.urls.small,alt:v,className:"w-full h-full object-cover transition-opacity duration-300\n                       "+(d?"opacity-100":"opacity-0"),onLoad:()=>{c(!0),h(!1)},onError:()=>{c(!1),h(!0)},loading:"lazy"}),!d&&!u&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 dark:bg-gray-700 animate-pulse"}),o&&!u&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 \r\n                         transition-all duration-200 flex items-center justify-center",children:e.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transform scale-90 group-hover:scale-100 \r\n                           transition-all duration-200 flex space-x-2",children:[e.jsx(n,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),a(r)},className:"bg-white/90 text-gray-900 hover:bg-white","aria-label":"View full image",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsx(n,{variant:"primary",size:"sm",onClick:e=>{e.stopPropagation(),s(r)},className:"bg-indigo-600/90 hover:bg-indigo-700","aria-label":"Generate AI description",children:e.jsx(w,{className:"w-4 h-4"})}),e.jsx(n,{variant:"secondary",size:"sm",onClick:async e=>{e.stopPropagation(),f(!0);try{await b(r);const e=document.createElement("a");e.href=r.urls.full,e.download=`unsplash-${r.id}.jpg`,e.target="_blank",document.body.appendChild(e),e.click(),document.body.removeChild(e),l.success("Download started")}catch(t){console.error("Download failed:",t),l.error("Failed to download image")}finally{f(!1)}},disabled:p,className:"bg-white/90 text-gray-900 hover:bg-white disabled:opacity-50","aria-label":"Download image",children:p?e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-gray-900 border-t-transparent"}):e.jsx(C,{className:"w-4 h-4"})})]})}),o&&e.jsx(n,{variant:"ghost",size:"sm",onClick:e=>{e.stopPropagation(),x(!g),l.success(g?"Removed from favorites":"Added to favorites")},className:"absolute top-2 right-2 p-1.5 bg-white/80 hover:bg-white/90 backdrop-blur-sm \r\n                      opacity-0 group-hover:opacity-100 transition-opacity duration-200","aria-label":g?"Remove from favorites":"Add to favorites",children:g?e.jsx(Z,{className:"w-4 h-4 text-red-500"}):e.jsx(j,{className:"w-4 h-4 text-gray-600"})})]}),e.jsxs("div",{className:"p-3",children:[(r.description||r.alt_description)&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-2",children:r.description||r.alt_description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("img",{src:r.user?.profile_image?.small||"/default-avatar.png",alt:`${y}'s avatar`,className:"w-6 h-6 rounded-full bg-gray-200 dark:bg-gray-700",onError:e=>{e.target.src="/default-avatar.png"}}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 truncate",children:y})]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.width,"×",r.height]})]}),r.tags&&r.tags.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[r.tags.slice(0,3).map((t,r)=>e.jsx("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 \r\n                         text-gray-600 dark:text-gray-300 rounded-full truncate max-w-20",title:t.title,children:t.title},`${t.title}-${r}`)),r.tags.length>3&&e.jsxs("span",{className:"inline-block px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 \r\n                             text-gray-600 dark:text-gray-300 rounded-full",children:["+",r.tags.length-3]})]})]})]})}),be=({columnIndex:t,rowIndex:r,style:a,data:s})=>{const{images:n,columnsPerRow:i,onImageSelect:l,onGenerateDescription:d,selectedImageId:c,isLoading:u}=s,h=n[r*i+t];return h?e.jsx("div",{style:a,className:"p-2",children:e.jsx(fe,{image:h,onSelect:l,onGenerateDescription:d,isSelected:c===h.id,showActions:!0})}):e.jsx("div",{style:a,className:"p-2",children:u?e.jsx(o,{className:"w-full aspect-square rounded-lg"}):null})},ye=({images:r,isLoading:a,hasMore:s,onLoadMore:n,onImageSelect:i,onGenerateDescription:l,selectedImageId:d,className:c=""})=>{const{width:u,height:h}=(()=>{const[e,r]=t.useState({width:"undefined"!=typeof window?window.innerWidth:1200,height:"undefined"!=typeof window?window.innerHeight:800});return t.useEffect(()=>{const e=()=>{r({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]),e})(),{columnsPerRow:m,columnWidth:x,rowHeight:p,containerHeight:f}=t.useMemo(()=>{const e=Math.min(u-64,1200),t=Math.floor(e/280),r=Math.min(Math.max(t,1),4);return{columnsPerRow:r,columnWidth:e/r,rowHeight:320,containerHeight:Math.min(h-200,800)}},[u,h]),b=Math.ceil(r.length/m),y=s?b+1:b,v=t.useCallback(e=>Math.floor(e/m)*m<r.length,[r.length,m]),w=t.useCallback(async(e,t)=>{s&&!a&&n()},[s,a,n]);if(!a&&0===r.length)return e.jsx(g,{title:"No images found",description:"Try searching with different keywords or check your spelling.",actionText:"Try Random Images",onAction:()=>n()});if(a&&0===r.length)return e.jsx("div",{className:`grid gap-4 ${c}`,children:Array.from({length:12}).map((t,r)=>e.jsx(o,{className:"w-full aspect-square rounded-lg"},r))});const j={images:r,columnsPerRow:m,onImageSelect:i,onGenerateDescription:l,selectedImageId:d,isLoading:a};return e.jsxs("div",{className:`w-full ${c}`,children:[e.jsxs("div",{className:"mb-4 text-sm text-gray-600 dark:text-gray-400",children:[r.length," ",1===r.length?"image":"images"," found",s&&" (scroll for more)"]}),e.jsx("div",{className:"w-full",children:e.jsx(pe,{isItemLoaded:v,itemCount:y*m,loadMoreItems:w,threshold:5,children:({onItemsRendered:t,ref:r})=>e.jsx(me,{ref:r,className:"focus:outline-none",columnCount:m,columnWidth:x,height:f,rowCount:y,rowHeight:p,width:u-32,itemData:j,onItemsRendered:({visibleColumnStartIndex:e,visibleColumnStopIndex:r,visibleRowStartIndex:a,visibleRowStopIndex:s})=>{t({overscanStartIndex:a*m+e,overscanStopIndex:s*m+r,visibleStartIndex:a*m+e,visibleStopIndex:s*m+r})},children:be})})}),a&&r.length>0&&e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-indigo-600 border-t-transparent"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading more images..."})]})]})},ve=({content:r,isStreaming:a,onComplete:s,className:n=""})=>{const[i,l]=t.useState(""),[o,c]=t.useState(!0);t.useEffect(()=>{if(a&&r.length>i.length){const e=setTimeout(()=>{l(r.slice(0,i.length+1))},20);return()=>clearTimeout(e)}if(!a&&(l(r),s&&i!==r)){const e=setTimeout(s,100);return()=>clearTimeout(e)}},[r,i,a,s]),t.useEffect(()=>{if(a){const e=setInterval(()=>{c(e=>!e)},530);return()=>clearInterval(e)}c(!1)},[a]),t.useEffect(()=>{r.length<i.length&&l("")},[r.length,i.length]);return e.jsxs("div",{className:d("relative",n),children:[e.jsx("div",{className:"prose prose-gray dark:prose-invert max-w-none",children:i?(u=i,u.split("\n").filter(e=>e.trim()).map((t,r)=>e.jsx("p",{className:r>0?"mt-4":"",children:t},r))):a?e.jsx("div",{className:"text-gray-400 dark:text-gray-500 italic",children:"Generating description..."}):e.jsx("div",{className:"text-gray-400 dark:text-gray-500 italic",children:'Click "Generate Description" to start'})}),a&&e.jsx("span",{className:d("inline-block w-0.5 h-5 bg-indigo-600 dark:bg-indigo-400 ml-1 transition-opacity",o?"opacity-100":"opacity-0"),"aria-hidden":"true"}),a&&e.jsxs("div",{className:"mt-4 flex items-center space-x-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-indigo-600 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{children:"AI is thinking..."})]})]});var u},we=[{value:"academic",label:"Academic",description:"Scholarly, analytical tone with precise terminology",icon:c,example:"This photograph demonstrates the principles of compositional balance through..."},{value:"poetic",label:"Poetic",description:"Lyrical, expressive language with vivid imagery",icon:H,example:"Golden light dances across the weathered surface, whispering stories of..."},{value:"technical",label:"Technical",description:"Detailed technical analysis of visual elements",icon:M,example:"Shot at f/2.8 aperture with shallow depth of field, the subject exhibits..."},{value:"casual",label:"Casual",description:"Conversational, accessible tone for general audiences",icon:R,example:"This is a beautiful shot that really captures the mood. You can see how..."},{value:"creative",label:"Creative",description:"Imaginative storytelling with emotional depth",icon:w,example:"In this moment frozen in time, we witness the silent conversation between..."}],je=({selectedStyle:t,onStyleChange:r,vocabularyLevel:a,onVocabularyLevelChange:s,disabled:n=!1})=>{const i=[{value:1,label:"Beginner",description:"Simple, everyday words"},{value:2,label:"Elementary",description:"Basic vocabulary with some descriptive terms"},{value:3,label:"Intermediate",description:"Moderate complexity, balanced vocabulary"},{value:4,label:"Advanced",description:"Sophisticated terms and concepts"},{value:5,label:"Expert",description:"Specialized, technical terminology"}];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Description Style"}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Choose your preferred tone"})]}),e.jsx("div",{className:"grid grid-cols-1 gap-3 sm:grid-cols-2",children:we.map(a=>{const s=a.icon,i=t===a.value;return e.jsxs("button",{onClick:()=>r(a.value),disabled:n,className:"relative p-4 text-left border rounded-lg transition-all duration-200 \n                         hover:shadow-md focus:outline-none focus:ring-2 focus:ring-indigo-500 \n                         disabled:opacity-50 disabled:cursor-not-allowed group\n                         "+(i?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-400":"border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 hover:border-gray-300 dark:hover:border-gray-600"),children:[i&&e.jsx("div",{className:"absolute -top-2 -right-2 w-5 h-5 bg-indigo-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})}),e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"p-2 rounded-lg "+(i?"bg-indigo-100 dark:bg-indigo-800/50":"bg-gray-100 dark:bg-gray-700 group-hover:bg-gray-200 dark:group-hover:bg-gray-600"),children:e.jsx(s,{className:"w-5 h-5 "+(i?"text-indigo-600 dark:text-indigo-400":"text-gray-600 dark:text-gray-400")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-sm "+(i?"text-indigo-900 dark:text-indigo-100":"text-gray-900 dark:text-gray-100"),children:a.label}),e.jsx("div",{className:"text-xs mt-1 line-clamp-2 "+(i?"text-indigo-700 dark:text-indigo-300":"text-gray-600 dark:text-gray-400"),children:a.description})]})]})]},a.value)})}),t&&e.jsxs("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-gray-800/50 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium",children:"Example output:"}),e.jsxs("div",{className:"text-sm text-gray-800 dark:text-gray-200 italic leading-relaxed",children:['"',we.find(e=>e.value===t)?.example,'"']})]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 dark:text-gray-100",children:"Vocabulary Level"}),e.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Difficulty: ",a,"/5"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"range",min:1,max:5,value:a,onChange:e=>s(Number(e.target.value)),disabled:n,className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer\r\n                     slider:bg-indigo-600 slider:rounded-lg\r\n                     disabled:opacity-50 disabled:cursor-not-allowed"}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:"Simple"}),e.jsx("span",{children:"Moderate"}),e.jsx("span",{children:"Advanced"})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:i.find(e=>e.value===a)?.label}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:i.find(e=>e.value===a)?.description})]})]})]}),e.jsxs("div",{className:"mt-6 text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Academic: Best for educational content and analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Poetic: Perfect for artistic and creative projects"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Technical: Ideal for professional photography analysis"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Vocabulary level affects word complexity and descriptions"})]})]})]})},ke={sophisticated:{word:"sophisticated",definition:"Having a refined knowledge of the ways of the world; complex or advanced",difficulty:4},compositional:{word:"compositional",definition:"Relating to the arrangement of elements in a work of art",difficulty:5},interplay:{word:"interplay",definition:"The way in which two or more things have an effect on each other",difficulty:3},hierarchy:{word:"hierarchy",definition:"A system in which members are ranked according to relative status or authority",difficulty:4},systematically:{word:"systematically",definition:"According to a fixed plan or system; methodically",difficulty:4},contextual:{word:"contextual",definition:"Relating to or depending on the context or circumstances",difficulty:4},harmonizes:{word:"harmonizes",definition:"To combine in a pleasing or effective way; to be in agreement",difficulty:3},suspended:{word:"suspended",definition:"Temporarily prevented from continuing; hanging from something",difficulty:2},symphony:{word:"symphony",definition:"An elaborate musical composition or something regarded as having a harmonious whole",difficulty:3},yearning:{word:"yearning",definition:"A feeling of intense longing for something",difficulty:3},bokeh:{word:"bokeh",definition:"The visual quality of the out-of-focus areas in a photograph",difficulty:5},aperture:{word:"aperture",definition:"A hole or opening through which light travels in a camera lens",difficulty:4},retention:{word:"retention",definition:"The ability to keep or continue to have something",difficulty:3},optimal:{word:"optimal",definition:"Best or most favorable; optimum",difficulty:3},transcends:{word:"transcends",definition:"To go beyond the range or limits of something",difficulty:4},narrative:{word:"narrative",definition:"A spoken or written account of connected events; a story",difficulty:3}},Ne=({text:r,extractedVocabulary:a=[],onWordSelect:s,isStreaming:n=!1,showDifficultyColors:i=!0,enableRealTimeExtraction:l=!0,className:o=""})=>{const[d,h]=t.useState(null),[m,g]=t.useState(null),[p,f]=t.useState([]),[b,y]=t.useState(!1),v=t.useMemo(()=>{const e={};return Object.entries(ke).forEach(([t,r])=>{e[t.toLowerCase()]={id:`mock_${t}`,word:r.word,definition:r.definition,language:"en",difficulty_level:r.difficulty,context:"Generated from text analysis",learned:!1,review_count:0,created_at:(new Date).toISOString()}}),a.forEach(t=>{e[t.word.toLowerCase()]=t}),p.forEach(t=>{e[t.word.toLowerCase()]=t}),e},[a,p]),w=t.useMemo(()=>{const e=new Set,t=r.toLowerCase();return Object.keys(v).forEach(r=>{new RegExp(`\\b${r}\\b`,"gi").test(t)&&e.add(r)}),Array.from(e)},[r,v]);t.useEffect(()=>{if(!l||!r||r.length<50)return;const e=setTimeout(async()=>{y(!0);try{const e=r.match(/\b[A-Za-z]{6,}\b/g)||[],t=e.filter(e=>{const t=e.toLowerCase();return!["the","and","that","have","for","not","with","you","this","but","his","from","they"].includes(t)&&e.length>=6&&!v[t]}).slice(0,3).map((e,t)=>({id:`realtime_${e}_${Date.now()}_${t}`,word:e.toLowerCase(),definition:`Advanced term: ${e}`,language:"en",difficulty_level:Math.min(5,Math.max(3,Math.floor(e.length/2))),context:`Extracted from: "${r.substring(0,100)}..."`,learned:!1,review_count:0,created_at:(new Date).toISOString()}));f(e=>[...e,...t].filter((e,t,r)=>r.findIndex(t=>t.word===e.word)===t).slice(0,10))}catch(e){console.error("Real-time vocabulary extraction failed:",e)}finally{y(!1)}},2e3);return()=>clearTimeout(e)},[r,l,v]);const j=t.useCallback(e=>{if(!w.length||!e)return e;let t=e;return w.forEach(e=>{const r=new RegExp(`\\b(${e})\\b`,"gi");t=t.replace(r,t=>{const r=v[e.toLowerCase()];let a="bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600";if(i){a={1:"bg-green-100 text-green-800 border-green-200 dark:bg-green-900/20 dark:text-green-300 dark:border-green-700",2:"bg-blue-100 text-blue-800 border-blue-200 dark:bg-blue-900/20 dark:text-blue-300 dark:border-blue-700",3:"bg-yellow-100 text-yellow-800 border-yellow-200 dark:bg-yellow-900/20 dark:text-yellow-300 dark:border-yellow-700",4:"bg-orange-100 text-orange-800 border-orange-200 dark:bg-orange-900/20 dark:text-orange-300 dark:border-orange-700",5:"bg-red-100 text-red-800 border-red-200 dark:bg-red-900/20 dark:text-red-300 dark:border-red-700"}[r?.difficulty_level||3]||a}else a="bg-indigo-100 text-indigo-800 border-indigo-200 dark:bg-indigo-900/20 dark:text-indigo-300 dark:border-indigo-700";return`<mark class="vocabulary-word cursor-pointer rounded px-1 border transition-all duration-200 hover:shadow-sm hover:scale-105 ${a}" data-word="${e.toLowerCase()}">${t}</mark>`})}),t},[w]),k=t.useCallback(e=>{const t=e.target;if(t.classList.contains("vocabulary-word")){const e=t.getAttribute("data-word");if(e){h(e);const r=t.getBoundingClientRect();g({x:r.left+r.width/2,y:r.top-10})}}},[]),N=t.useCallback(()=>{h(null),g(null)},[]),S=t.useCallback(e=>{const t=e.target;if(t.classList.contains("vocabulary-word")){const e=t.getAttribute("data-word");if(e&&v[e]){const r=v[e];s(r.word,r.definition),t.classList.add("animate-pulse"),setTimeout(()=>t.classList.remove("animate-pulse"),600)}}},[s,v]);return n?e.jsx(ve,{content:r,isStreaming:n,className:o}):e.jsxs("div",{className:`relative ${o}`,children:[(w.length>0||b)&&e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(u,{className:"w-4 h-4"}),e.jsxs("span",{children:[w.length," vocabulary ",1===w.length?"word":"words"," found"]}),a.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"•"}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(c,{className:"w-3 h-3"}),e.jsxs("span",{children:[a.length," from AI"]})]})]}),p.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"•"}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full animate-pulse"}),e.jsxs("span",{children:[p.length," real-time"]})]})]})]}),b&&e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-purple-600 dark:text-purple-400",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full animate-bounce"}),e.jsx("span",{children:"Extracting..."})]})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Click highlighted words to add to your vocabulary collection"})]}),e.jsx("div",{className:"prose prose-gray dark:prose-invert max-w-none leading-relaxed",dangerouslySetInnerHTML:{__html:j(r)},onMouseOver:k,onMouseLeave:N,onClick:S}),d&&m&&v[d]&&e.jsxs("div",{className:"fixed z-50 max-w-sm p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 \r\n                   rounded-lg shadow-xl transform -translate-x-1/2 -translate-y-full pointer-events-none\r\n                   backdrop-blur-sm bg-white/95 dark:bg-gray-800/95",style:{left:m.x,top:m.y},children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 text-lg",children:v[d].word}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsxs("span",{className:`text-xs px-2 py-1 rounded-full ${i?{1:"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300",2:"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300",3:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300",4:"bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300",5:"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300"}[v[d].difficulty_level]||"bg-gray-100 text-gray-700":"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300"}`,children:["Level ",v[d].difficulty_level]}),v[d].id.startsWith("realtime_")&&e.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-300",children:"Real-time"})]})]}),e.jsx(x,{className:"w-5 h-5 text-indigo-500 flex-shrink-0"})]}),e.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:v[d].definition}),v[d].context&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 italic border-l-2 border-gray-200 dark:border-gray-600 pl-2",children:["Context: ",v[d].context]}),e.jsx("div",{className:"text-xs text-indigo-600 dark:text-indigo-400 font-medium",children:"Click to add to your vocabulary collection"})]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-3 h-3 \r\n                     bg-white dark:bg-gray-800 border-r border-b border-gray-200 dark:border-gray-700 \r\n                     rotate-45"})]}),w.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Difficulty Levels:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-green-100 border border-green-200"}),e.jsx("span",{children:"Beginner"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-blue-100 border border-blue-200"}),e.jsx("span",{children:"Elementary"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-yellow-100 border border-yellow-200"}),e.jsx("span",{children:"Intermediate"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-orange-100 border border-orange-200"}),e.jsx("span",{children:"Advanced"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-red-100 border border-red-200"}),e.jsx("span",{children:"Expert"})]})]})]})]})},Se=[{id:"composition",label:"Composition & Layout",icon:O},{id:"lighting",label:"Lighting & Mood"},{id:"colors",label:"Color Palette"},{id:"subjects",label:"Main Subjects"},{id:"emotions",label:"Emotional Impact"},{id:"technique",label:"Photography Technique"},{id:"setting",label:"Setting & Environment"},{id:"details",label:"Important Details"}],Ce=({value:r,onChange:a,focusAreas:s,onFocusAreasChange:l,suggestions:o=[],disabled:d=!1,className:c=""})=>{const[u,h]=t.useState(!1),[m,g]=t.useState(!1),x=t.useRef(null),p=Y(e=>{a(e)},300),f=t.useCallback(e=>{const t=e.target.value;p(t)},[p]),b=t.useCallback(e=>{const t=s.includes(e)?s.filter(t=>t!==e):[...s,e];l(t)},[s,l]),y=t.useCallback(e=>{const t=x.current?.value||"",r=t+(t?"\n\n":"")+e;x.current&&(x.current.value=r,a(r),x.current.focus()),h(!1)},[a]),v=t.useCallback(()=>{x.current&&(x.current.value="",a(""),x.current.focus())},[a]),j=t.useCallback(()=>{x.current&&(x.current.style.height="auto",x.current.style.height=`${x.current.scrollHeight}px`)},[]);return e.jsxs("div",{className:`space-y-4 ${c}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Context & Notes"})]}),e.jsxs("div",{className:"flex space-x-2",children:[o.length>0&&e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>h(!u),className:"text-xs",children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Suggestions"]}),e.jsxs(n,{variant:"ghost",size:"sm",onClick:()=>g(!m),className:"text-xs",children:[e.jsx(w,{className:"w-4 h-4 mr-1"}),"Focus Areas"]})]})]}),m&&e.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"What should the AI focus on?"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>g(!1),className:"p-1",children:e.jsx(i,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-2",children:Se.map(t=>{const r=s.includes(t.id),a=t.icon;return e.jsx("button",{onClick:()=>b(t.id),disabled:d,className:"p-3 text-left rounded-lg border transition-all duration-200\n                           hover:shadow-sm focus:outline-none focus:ring-2 focus:ring-indigo-500\n                           disabled:opacity-50 disabled:cursor-not-allowed\n                           "+(r?"bg-indigo-50 border-indigo-200 text-indigo-700 dark:bg-indigo-900/20 dark:border-indigo-700 dark:text-indigo-300":"bg-white border-gray-200 text-gray-600 hover:border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-400"),children:e.jsxs("div",{className:"flex items-center space-x-2",children:[a&&e.jsx(a,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:t.label})]})},t.id)})}),s.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Selected focus areas:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.map(t=>{const r=Se.find(e=>e.id===t);return r?e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs\n                               bg-indigo-100 text-indigo-700 dark:bg-indigo-900/30 dark:text-indigo-300",children:[r.label,e.jsx("button",{onClick:()=>b(t),className:"ml-1 hover:text-indigo-900 dark:hover:text-indigo-100",children:e.jsx(i,{className:"w-3 h-3"})})]},t):null})})]})]}),u&&o.length>0&&e.jsxs("div",{className:"p-4 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm font-medium text-amber-800 dark:text-amber-200",children:"Suggested prompts:"}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"p-1 text-amber-600 hover:text-amber-800",children:e.jsx(i,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"space-y-2",children:o.map((t,r)=>e.jsxs("button",{onClick:()=>y(t),disabled:d,className:"block w-full p-2 text-left text-sm text-amber-700 dark:text-amber-300\n                         hover:bg-amber-100 dark:hover:bg-amber-800/30 rounded\n                         transition-colors duration-150\n                         disabled:opacity-50 disabled:cursor-not-allowed",children:['"',t,'"']},r))})]}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:x,defaultValue:r,onChange:f,onInput:j,placeholder:"Add any specific notes or context you'd like the AI to consider...\\n\\nFor example:\\n• Focus on the emotional impact\\n• Analyze the technical aspects\\n• Describe for a beginner audience\\n• Emphasize the historical context",disabled:d,className:"w-full min-h-[120px] max-h-[300px] p-4 rounded-lg border\n                   border-gray-200 dark:border-gray-700\n                   bg-white dark:bg-gray-800\n                   text-gray-900 dark:text-gray-100\n                   placeholder-gray-500 dark:placeholder-gray-400\n                   focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\n                   disabled:opacity-50 disabled:cursor-not-allowed\n                   resize-none transition-all duration-200"}),e.jsx("div",{className:"absolute bottom-3 right-3 flex items-center space-x-2",children:r.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r.length,"/1000"]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:v,disabled:d,className:"p-1 text-gray-400 hover:text-gray-600","aria-label":"Clear input",children:e.jsx(i,{className:"w-4 h-4"})})]})})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Your notes will guide the AI's analysis and description style"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Be specific about what aspects interest you most"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-1 h-1 bg-indigo-500 rounded-full"}),e.jsx("span",{children:"Select focus areas to emphasize particular elements"})]})]})]})},Ie=({image:a,onClose:s,isOpen:o,className:d=""})=>{const[c,u]=t.useState("academic"),[m,g]=t.useState(!0),[x,b]=t.useState(""),[y,v]=t.useState([]),[j,k]=t.useState(3),[N,S]=t.useState(!1),{description:C,vocabulary:I,isGenerating:R,error:_,tokenCount:L,processingTime:M,progress:T,generate:D,cancel:O,clearCache:P}=p(),{addWord:z}=f(),W=t.useCallback(()=>{a&&D(a.id,c,{context:x,focusAreas:y,vocabularyLevel:j,forceRefresh:!1})},[a,c,x,y,j,D]),H=t.useCallback(()=>{a&&D(a.id,c,{context:x,focusAreas:y,vocabularyLevel:j,forceRefresh:!0})},[a,c,x,y,j,D]),$=t.useCallback(async(e,t)=>{if(a)try{await z({word:e,definition:t,language:"en",difficulty_level:j,context:C.substring(0,200),image_id:a.id,learned:!1,review_count:0}),l.success(`Added "${e}" to vocabulary`)}catch(r){console.error("Failed to add word:",r),l.error("Failed to add word to vocabulary")}},[a,C,j,z]),B=t.useCallback(()=>{if(C&&!N)if("speechSynthesis"in window){const e=new SpeechSynthesisUtterance(C);e.rate=.8,e.volume=.8,e.onstart=()=>S(!0),e.onend=()=>S(!1),e.onerror=()=>{S(!1),l.error("Speech synthesis failed")},speechSynthesis.speak(e)}else l.error("Speech synthesis not supported in this browser")},[C,N]),G=t.useCallback(()=>{"speechSynthesis"in window&&(speechSynthesis.cancel(),S(!1))},[]),V=t.useCallback(()=>{C&&navigator.clipboard.writeText(C).then(()=>{l.success("Description copied to clipboard")}).catch(()=>{l.error("Failed to copy to clipboard")})},[C]),q=t.useCallback(e=>{if(!C||!a)return;let t="",r="",s="";switch(e){case"txt":t=C,r="text/plain",s="txt";break;case"md":t=`# Image Description\n\n![Image](${a.urls.regular})\n\n**Style:** ${c}\n**Generated:** ${(new Date).toLocaleString()}\n\n## Description\n\n${C}\n\n## Vocabulary\n\n${I.map(e=>`- **${e.word}**: ${e.definition}`).join("\n")}`,r="text/markdown",s="md";break;case"pdf":return void l.info("PDF export coming soon!")}const n=new Blob([t],{type:r}),i=URL.createObjectURL(n),o=document.createElement("a");o.href=i,o.download=`description-${a.id}-${c}.${s}`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(i),l.success(`Description exported as ${e.toUpperCase()}`)},[C,I,a,c]);return r.useEffect(()=>{a&&o&&W(),"speechSynthesis"in window&&(speechSynthesis.cancel(),S(!1))},[a?.id,o]),r.useEffect(()=>{!o&&"speechSynthesis"in window&&(speechSynthesis.cancel(),S(!1))},[o]),o&&a?e.jsxs("div",{className:`fixed inset-0 z-50 overflow-hidden ${d}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s,"aria-hidden":"true"}),e.jsx("div",{className:"absolute right-0 top-0 h-full w-full max-w-2xl bg-white dark:bg-gray-900 shadow-2xl",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(w,{className:"w-6 h-6 text-indigo-600 dark:text-indigo-400"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-gray-100",children:"AI Description"})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:s,className:"p-2","aria-label":"Close description panel",children:e.jsx(i,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-gray-100 dark:bg-gray-800",children:[e.jsx("img",{src:a.urls.regular,alt:a.alt_description||"Selected image",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-4",children:e.jsxs("div",{className:"text-white text-sm",children:[e.jsxs("div",{className:"font-medium",children:["by ",a.user?.name||a.user?.username]}),e.jsxs("div",{className:"text-gray-300",children:[a.width," × ",a.height]})]})})]})}),e.jsx("div",{className:"mb-6",children:e.jsx(je,{selectedStyle:c,onStyleChange:u,vocabularyLevel:j,onVocabularyLevelChange:k,disabled:R})}),e.jsx("div",{className:"mb-6",children:e.jsx(Ce,{value:x,onChange:b,focusAreas:y,onFocusAreasChange:v,disabled:R,suggestions:["Focus on the emotional impact and mood","Analyze the technical photography aspects","Describe for a beginner audience","Emphasize the artistic composition","Include historical or cultural context"]})}),e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(n,{onClick:W,disabled:R,loading:R,className:"flex-1",children:R?"Generating...":"Generate Description"}),R&&e.jsx(n,{variant:"outline",onClick:O,className:"px-4",children:"Cancel"}),C&&!R&&e.jsx(n,{variant:"outline",onClick:H,className:"px-4","aria-label":"Regenerate with current settings",children:e.jsx(h,{className:"w-4 h-4"})}),!R&&e.jsx(n,{variant:"ghost",onClick:P,className:"px-4 text-gray-500","aria-label":"Clear cache",children:e.jsx(U,{className:"w-4 h-4"})})]}),R&&e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${T}%`}})}),(L>0||M>0)&&!R&&e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[L," tokens"]}),e.jsxs("span",{children:[M,"ms processing time"]})]})]}),_&&e.jsxs("div",{className:"mb-6 p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[e.jsxs("div",{className:"text-red-700 dark:text-red-400 text-sm",children:[e.jsx("strong",{children:"Error:"})," ",_.message]}),e.jsx(n,{variant:"outline",size:"sm",onClick:W,className:"mt-2",children:"Try Again"})]}),(C||R)&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:"Description"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:m,onChange:e=>g(e.target.checked),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 dark:border-gray-600 dark:bg-gray-700"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Highlight vocabulary"})]})]}),e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 bg-gray-50 dark:bg-gray-800/50",children:m?e.jsx(Ne,{text:C,onWordSelect:$,isStreaming:R}):e.jsx(ve,{content:C,isStreaming:R,className:"text-gray-900 dark:text-gray-100 leading-relaxed"})}),C&&!R&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[C.split(/\s+/).length," words"]}),e.jsxs("span",{children:["~",Math.ceil(C.split(/\s+/).length/200)," min read"]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(n,{variant:"outline",size:"sm",onClick:V,className:"flex items-center space-x-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy"})]}),e.jsxs(n,{variant:"outline",size:"sm",onClick:N?G:B,className:"flex items-center space-x-1",children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:N?"Stop":"Listen"})]}),e.jsxs("div",{className:"relative group",children:[e.jsxs(n,{variant:"outline",size:"sm",className:"flex items-center space-x-1",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Export"})]}),e.jsxs("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200",children:[e.jsx("button",{onClick:()=>q("txt"),className:"block w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-t-lg",children:"Text (.txt)"}),e.jsx("button",{onClick:()=>q("md"),className:"block w-full px-3 py-2 text-left text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-b-lg",children:"Markdown (.md)"})]})]})]})]}),I.length>0&&!R&&e.jsxs("div",{className:"mt-4 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2",children:["Vocabulary Extracted: ",I.length," words"]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[I.slice(0,5).map((t,r)=>e.jsx("span",{className:"px-2 py-1 text-xs bg-indigo-100 dark:bg-indigo-800/50 text-indigo-700 dark:text-indigo-300 rounded-full",children:t.word},r)),I.length>5&&e.jsxs("span",{className:"px-2 py-1 text-xs text-indigo-600 dark:text-indigo-400",children:["+",I.length-5," more"]})]})]})]}),!C&&!R&&!_&&e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(w,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg mb-2",children:"Ready to generate!"}),e.jsx("p",{className:"text-sm",children:'Choose a style and click "Generate Description" to create an AI-powered description of this image.'})]})]}),C&&!R&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(n,{variant:"outline",onClick:V,className:"flex items-center justify-center space-x-2",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsx("span",{children:"Copy Text"})]}),e.jsxs(n,{variant:"outline",onClick:()=>q("txt"),className:"flex items-center justify-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Save File"})]})]}),I.length>0&&e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:I.length})," vocabulary words extracted",e.jsx("span",{className:"mx-2",children:"•"}),e.jsx("span",{children:"Click words above to add to your collection"})]})})]})]})})]}):null},Re=t.createContext(null),_e=()=>{const e=t.useContext(Re);if(!e)throw new Error("useAppState must be used within an AppStateProvider");return e},Ee=()=>{const[r,a]=t.useState(!1),[s,i]=t.useState(!1),{selectedImage:o,selectImage:d,clearSelection:c}=(()=>{const{state:e,dispatch:t}=_e();return{selectedImage:e.selectedImage,selectImage:e=>t({type:"SELECT_IMAGE",payload:e}),clearSelection:()=>t({type:"SELECT_IMAGE",payload:null})}})(),{searchResults:u,searchQuery:h,searchFilters:m,setSearchResults:x,setSearchQuery:p,setSearchFilters:f,clearSearch:w}=(()=>{const{state:e,dispatch:t}=_e();return{searchResults:e.searchResults,searchQuery:e.searchQuery,searchFilters:e.searchFilters,setSearchResults:e=>t({type:"SET_SEARCH_RESULTS",payload:e}),setSearchQuery:e=>t({type:"SET_SEARCH_QUERY",payload:e}),setSearchFilters:e=>t({type:"SET_SEARCH_FILTERS",payload:e}),clearSearch:()=>t({type:"CLEAR_SEARCH"})}})(),{resetDescription:j}=(()=>{const{state:e,dispatch:t}=_e();return{currentDescription:e.currentDescription,isGeneratingDescription:e.isGeneratingDescription,setCurrentDescription:e=>t({type:"SET_CURRENT_DESCRIPTION",payload:e}),setGeneratingDescription:e=>t({type:"SET_GENERATING_DESCRIPTION",payload:e}),resetDescription:()=>t({type:"RESET_DESCRIPTION"})}})(),{images:k,isLoading:S,error:C,hasMore:I,searchImages:R,loadMore:_,clearResults:E}=b();t.useEffect(()=>{k.length!==u.length&&x(k)},[k,u.length,x]);const L=t.useCallback(async(e,t=m)=>{if(e.trim())try{p(e),f(t),c(),j(),await R({query:e.trim(),orientation:t.orientation,color:t.color,category:t.category}),i(!1)}catch(r){console.error("Search failed:",r),l.error("Search failed. Please try again.")}else l.error("Please enter a search term")},[m,p,f,c,j,R]),M=t.useCallback(e=>{d(e),a(!1),setTimeout(()=>{a(!0)},100)},[d]),T=t.useCallback(e=>{d(e),a(!0)},[d]),A=t.useCallback(()=>{a(!1)},[]),D=t.useCallback(()=>{I&&!S&&_()},[I,S,_]),O=t.useCallback(()=>{w(),E(),c(),a(!1),i(!1)},[w,E,c]),P=t.useCallback(()=>{const e=["nature","architecture","food","travel","art","science","technology","animals","flowers","landscape","city","ocean"],t=e[Math.floor(Math.random()*e.length)];L(t)},[L]);return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Image Search"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Search for beautiful images and generate AI-powered descriptions to learn new vocabulary."})]}),e.jsx(y,{className:"p-6 mb-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(K,{onSearch:L,placeholder:"Search for images... (e.g., 'mountain landscape', 'city architecture')",defaultValue:h,isLoading:S})}),e.jsxs(n,{variant:"outline",onClick:()=>i(!s),className:s?"bg-indigo-50 border-indigo-200":"",children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Filters"]})]}),s&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Orientation"}),e.jsxs("select",{value:m.orientation||"",onChange:e=>f({...m,orientation:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Any orientation"}),e.jsx("option",{value:"landscape",children:"Landscape"}),e.jsx("option",{value:"portrait",children:"Portrait"}),e.jsx("option",{value:"squarish",children:"Square"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color"}),e.jsxs("select",{value:m.color||"",onChange:e=>f({...m,color:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Any color"}),e.jsx("option",{value:"black_and_white",children:"Black & White"}),e.jsx("option",{value:"black",children:"Black"}),e.jsx("option",{value:"white",children:"White"}),e.jsx("option",{value:"yellow",children:"Yellow"}),e.jsx("option",{value:"orange",children:"Orange"}),e.jsx("option",{value:"red",children:"Red"}),e.jsx("option",{value:"purple",children:"Purple"}),e.jsx("option",{value:"magenta",children:"Magenta"}),e.jsx("option",{value:"green",children:"Green"}),e.jsx("option",{value:"teal",children:"Teal"}),e.jsx("option",{value:"blue",children:"Blue"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs("select",{value:m.category||"",onChange:e=>f({...m,category:e.target.value||void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[e.jsx("option",{value:"",children:"Any category"}),e.jsx("option",{value:"nature",children:"Nature"}),e.jsx("option",{value:"architecture",children:"Architecture"}),e.jsx("option",{value:"food",children:"Food"}),e.jsx("option",{value:"travel",children:"Travel"}),e.jsx("option",{value:"technology",children:"Technology"}),e.jsx("option",{value:"people",children:"People"})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(n,{variant:"ghost",size:"sm",onClick:P,disabled:S,children:[e.jsx(Q,{className:"w-4 h-4 mr-1"}),"Random Search"]}),(h||u.length>0)&&e.jsx(n,{variant:"ghost",size:"sm",onClick:O,disabled:S,children:"Clear Search"})]})]})}),C&&e.jsxs(y,{className:"p-4 mb-6 border-red-200 bg-red-50 dark:bg-red-900/20 dark:border-red-800",children:[e.jsxs("div",{className:"text-red-700 dark:text-red-400",children:[e.jsx("strong",{children:"Search Error:"})," ",C.message]}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>L(h),className:"mt-2 border-red-300 text-red-700 hover:bg-red-100",children:"Try Again"})]}),u.length>0||S?e.jsx(ye,{images:u,isLoading:S,hasMore:I,onLoadMore:D,onImageSelect:M,onGenerateDescription:T,selectedImageId:o?.id,className:"mb-6"}):!S&&!C&&h&&e.jsx(g,{title:"No images found",description:`No results found for "${h}". Try different keywords or check your filters.`,actionText:"Try Random Search",onAction:P}),!h&&!S&&0===u.length&&e.jsx("div",{className:"text-center py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-indigo-100 dark:bg-indigo-900 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(N,{className:"w-8 h-8 text-indigo-600 dark:text-indigo-400"})}),e.jsx("h2",{className:"text-2xl font-semibold text-gray-900 dark:text-white mb-4",children:"Start your visual vocabulary journey"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:"Search for images that interest you, then generate AI-powered descriptions to discover new vocabulary words in context."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(n,{onClick:P,size:"lg",disabled:S,children:[e.jsx(Q,{className:"w-5 h-5 mr-2"}),"Try Random Search"]}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Popular searches: nature, architecture, food, travel, art"})]})]})})]}),e.jsx(Ie,{image:o,onClose:A,isOpen:r})]})};export{Ee as default};
